<Controls:MetroWindow x:Class="lenticulis_gui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        Title="Lenticulis" Height="600" Width="800"
        WindowStyle="SingleBorderWindow"
        WindowStartupLocation="CenterScreen" WindowState="Maximized"
        SizeChanged="MetroWindow_SizeChanged"
        BorderBrush="DodgerBlue">
    <Controls:MetroWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />

                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />

                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Controls:MetroWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="185"/>
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" LastChildFill="True">
            <DockPanel DockPanel.Dock="Top">
                <Menu>
                    <MenuItem Header="_Soubor">
                        <MenuItem Header="_Nový" Click="NewProjectButton_Click"/>
                        <MenuItem Header="_Otevřít" Click="ButtonLoad_Click" />
                        <MenuItem Header="_Uložit" Click="ButtonSave_Click" />
                        <Separator/>
                        <MenuItem Header="_Zavřít" Click="CloseProgram_Click"/>
                    </MenuItem>
                    <MenuItem Header="_Úpravy">
                    </MenuItem>
                    <MenuItem Header="_O projektu">
    					<MenuItem Header="_GitHub.com" Click="OpenGithub_Click" />
                        <MenuItem Header="_Tutoriály">
                            <MenuItem Header="_Videonávody" />
                            <MenuItem Header="Už_ivatelská příručka" />
                        </MenuItem>
                        <Separator/>
                        <MenuItem Header="_Licence (GPLv3)" Click="OpenLicence_Click" />
                        <MenuItem Header="O _projektu" Click="ShowAboutWindow_Click" />
                    </MenuItem>
                </Menu>
            </DockPanel>

            <ToolBarTray DockPanel.Dock="Top">
                <ToolBar>
                    <Button ToolTip="Nový" Click="NewProjectButton_Click">
                        <Image Source="/lenticulis-gui;component/res/icon/New.ico" />
                    </Button>
                    <Button ToolTip="Uložit" Click="ButtonSave_Click">
                        <Image Source="/lenticulis-gui;component/res/icon/Save.ico" />
                    </Button>
                    <Button ToolTip="Otevřít" Click="ButtonLoad_Click">
                        <Image Source="/lenticulis-gui;component/res/icon/Folder.ico" />
                    </Button>
                    <Separator />
                    <Button ToolTip="Zpět">
                        <Image Source="/lenticulis-gui;component/res/icon/Undo.ico" />
                    </Button>
                    <Button ToolTip="Vpřed">
                        <Image Source="/lenticulis-gui;component/res/icon/Redo.ico" />
                    </Button>
                    <Separator />
                    <Button ToolTip="Přiblížit" Click="ZoomInButton_Clicked">
                        <Image Source="/lenticulis-gui;component/res/icon/ZoomIn.ico" />
                    </Button>
                    <Button ToolTip="Oddálit" Click="ZoomOutButton_Clicked">
                        <Image Source="/lenticulis-gui;component/res/icon/ZoomOut.ico" />
                    </Button>
                    <Separator />
                    <Button ToolTip="Exportovat" Click="ExportButton_Clicked">
                        <Image Source="/lenticulis-gui;component/res/icon/Export.ico" />
                    </Button>
                </ToolBar>
                <ToolBar>
                    <RadioButton Style="{x:Null}" GroupName="CanvasSelect" Name="SingleCanvas" Content="Jeden snímek" IsChecked="True" Click="SingleCanvas_Checked" />
                    <RadioButton Style="{x:Null}" GroupName="CanvasSelect" Name="DoubleCanvas" Content="Dva snímky" Click="DoubleCanvas_Checked"  />
                </ToolBar>
            </ToolBarTray>

            <ToolBarTray DockPanel.Dock="Left" Orientation="Vertical">
                <ToolBar>
                    <RadioButton GroupName="ToolSelect" Name="TranslationButton" IsChecked="True"  Style="{x:Null}" ToolTip="Přesunout vrstvu" Click="Translation_Checked">
                        <Image Source="/lenticulis-gui;component/res/icon/Move.ico" Margin="0,0,0,10"/>
                    </RadioButton>
                    <RadioButton GroupName="ToolSelect" Name="ScaleButton" Style="{x:Null}" ToolTip="Změnit velikost vrstvy" Click="Scale_Checked">
                        <Image Source="/lenticulis-gui;component/res/icon/Resize.ico" Margin="0,0,0,10"/>
                    </RadioButton>
                    <RadioButton GroupName="ToolSelect" Name="RotateButton" Style="{x:Null}" ToolTip="Rotovat vrstvu" Click="Rotate_Checked">
                        <Image Source="/lenticulis-gui;component/res/icon/Refresh.ico" Margin="0,0,0,10"/>
                    </RadioButton>
                </ToolBar>
            </ToolBarTray>


            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>

                <Border Width="Auto">
                    <Grid Name="CanvasPanel" Background="#FFECECEC" />
                </Border>

                <!-- Grid splitter -->
                <GridSplitter Width="3" ShowsPreview="True" VerticalAlignment="Stretch" Background="DodgerBlue" />

                <!-- Browser begin -->
                <Border Grid.Column="1">
                    <Grid Width="Auto">
                        <TextBox Name="AddressBlock" Height="45" VerticalAlignment="Top" ScrollViewer.HorizontalScrollBarVisibility="Auto" IsReadOnly="True"/>

                        <TabControl Style="{x:Null}" Margin="0,45,0,0">
                            <TabItem Style="{x:Null}" Header="Počítač">
                                <ListBox IsSynchronizedWithCurrentItem="true" Name="BrowserList" PreviewMouseLeftButtonDown="Browser_MouseLeftButtonDown">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate DataType="BrowserItem">
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="{Binding Ico}" Margin="0,0,5,0" />
                                                <TextBlock Text="{Binding Name}" ToolTip="{Binding Path}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="{x:Type ListBoxItem}" />
                                    </ListBox.ItemContainerStyle>
                                </ListBox>
                            </TabItem>
                            <TabItem Style="{x:Null}" Header="Nedávno použité">
                                <ListBox IsSynchronizedWithCurrentItem="true" Name="LastUsedList" PreviewMouseLeftButtonDown="Browser_MouseLeftButtonDown">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate DataType="BrowserItem">
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="{Binding Ico}" Margin="0,0,5,0" />
                                                <TextBlock Text="{Binding Name}" ToolTip="{Binding Path}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="{x:Type ListBoxItem}">
                                            <EventSetter Event="MouseDoubleClick" Handler="LastUsed_DoubleClick"/>
                                        </Style>
                                    </ListBox.ItemContainerStyle>
                                </ListBox>
                            </TabItem>
                        </TabControl>
                    </Grid>
                </Border>
                <!-- Browser end -->
            </Grid>
        </DockPanel>

        <!-- grid splitter horizontal -->
        <GridSplitter Grid.Row="1" Height="3" ShowsPreview="True" HorizontalAlignment="Stretch" Background="DodgerBlue" />

        <!-- Timeline begin -->
        <DockPanel LastChildFill="True" Grid.Row="2" Height="Auto">
            <StackPanel DockPanel.Dock="Top" Name="SliderPanel" Height="40" Margin="45,0,0,0" />
            <ToolBarTray DockPanel.Dock="Left" Orientation="Vertical" Margin="0,1,0,0">
                <ToolBar>
                    <Button Name="AddLayer" ToolTip="Přidat vrstvu" Click="AddLayer_Click">
                        <Image Source="/lenticulis-gui;component/res/icon/Add.ico" Margin="0,0,0,10"/>
                    </Button>
                    <Button Name="RemoveLayer" ToolTip="Odstranit vrstvu" Click="RemoveLayer_Click">
                        <Image Source="/lenticulis-gui;component/res/icon/Remove.ico" Margin="0,0,0,10"/>
                    </Button>
                </ToolBar>
            </ToolBarTray>

            <ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
                <DockPanel LastChildFill="True">
                    <Grid DockPanel.Dock="Top" Name="TimelineHeader" Background="LightGray" Height="25" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="25" />
                        </Grid.RowDefinitions>
                    </Grid>
                    <Grid Name="Timeline" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                          MouseLeftButtonUp="Timeline_MouseLeftButtonUp" MouseMove="Timeline_MouseMove" AllowDrop="True" Drop="Timeline_DropHandler">
                    </Grid>
                </DockPanel>
            </ScrollViewer>
        </DockPanel>
        <!-- Timeline end-->


    </Grid>
</Controls:MetroWindow>
